<%- include('header')  -%>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Profile</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  <!-- Navbar/Header (Assuming the header is included using an external file) -->
  <% include('header') %>
  
  <div class="container-fluid">
    <div class="row">
      <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block  sidebar">
        <div class="position-sticky">
          <div style="margin-left: 50px; margin-top: 30px;">
            <a href="#" class="list-group-item list-group-item-action"><b>Manage My Account</b></a>
            <ul class="pl-4">
              <li><a href="/profile" class="list-group-item list-group-item-action" style="list-style: none;">Profile</a></li>
              <li><a href="/address" class="list-group-item list-group-item-action">Address Book</a></li>
              <li><a href="/changepassword" class="list-group-item list-group-item-action">Change Password</a></li>
              <li><a href="/wallet" class="list-group-item list-group-item-action">Wallet</a></li>
              <li><a href="/coupons" class="list-group-item list-group-item-action">Coupons</a></li>
            </ul>
            <a href="" class="list-group-item list-group-item-action"><b>Orders</b></a><br>
            <ul class="pl-4">
              <li><a href="/orders" class="list-group-item list-group-item-action" style="list-style: none;"> My Orders</a></li>
              <li><a href="/returns" class="list-group-item list-group-item-action">Returns</a></li>
              <li><a href="/cancellations" class="list-group-item list-group-item-action">Cancellations</a></li>
            </ul>
            <a href="/cart" class="list-group-item list-group-item-action"><b>Cart</a></b><br>
            <a href="/wishlist" class="list-group-item list-group-item-action"><b>Wishlist</a></b><br>
            <a href="/logout" class="list-group-item list-group-item-action"><b>Logout</a></b><br>
          </div>
        </div>
      </nav>
      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div class="card mt-3 mx-auto" style="max-width: 600px;">
          <div class="card-body">
            <div class="container">
              <div class="row">
                <div class="col-md-12">
                  <div class="reset-form">
                    <h2 class="text-center mb-4">Reset Password</h2>
                    <% if (error) { %>
                    <div class="alert alert-danger" role="alert">
                      <%= error %>
                    </div>
                    <% } %>
                    <form action="/changepassword" id="reset-password-form" method="post" onsubmit="return validateForm()">
                      <div class="mb-3">
                        <label for="Password" class="form-label">Current Password</label>
                        <input type="password" class="form-control" id="Password" name="Password" placeholder="Enter current password" required>
                      </div>
                      <div class="mb-3">
                        <label for="newPassword" class="form-label">New Password</label>
                        <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="Enter new password" required>
                      </div>
                      <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm new password" required>
                      </div>
                      <div class="text-center">
                        <button type="submit" class="btn btn-primary">Reset Password</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
      
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    function validateForm() {
      // Fetch the values of the password fields
      // const currentPassword = document.getElementById("Password").value;
      const newPassword = document.getElementById("newPassword").value;
      const confirmPassword = document.getElementById("confirmPassword").value;
  
      // Verify new password and confirm password match
      if (newPassword !== confirmPassword) {
        // Use SweetAlert for a more user-friendly alert
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: 'New password and confirm password do not match!',
        });
        return false;
      }
  
      // Additional client-side validations can be added here if needed
  
      return true; // Proceed with form submission
    }
  </script>
</body>
</html>
